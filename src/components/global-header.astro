---
// src/components/global-header.astro
import ThemeSelector from './theme-selector';

interface NavItem {
  label: string;
  href: string;
}

const navItems: NavItem[] = [
  { label: 'About', href: '/about' },
  { label: 'Blog', href: '/blog' },
  { label: 'Showcase', href: '/showcase' },
];

const currentPath = Astro.url.pathname;

const isActive = (href: string): boolean => {
  if (href === '/') return currentPath === '/';
  return currentPath.startsWith(href);
};
---

<header class="navbar bg-base-100 shadow-sm">
  <div class="navbar-start">
    <a href="/" class="btn btn-ghost text-xl">duchi.click</a>
  </div>
  <div class="navbar-end">
    <div class="dropdown dropdown-end lg:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h8m-8 6h16"></path>
        </svg>
      </div>
      <ul
        tabindex="0"
        class="menu dropdown-content menu-sm z-10 mt-3 w-52 rounded-box bg-base-100 p-2 shadow gap-1"
      >
        {
          navItems.map((item) => (
            <li>
              <a
                href={item.href}
                class:list={[{ 'bg-primary text-primary-content': isActive(item.href) }]}
              >
                {item.label}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
    <ul class="menu menu-horizontal hidden px-1 lg:flex gap-1">
      {
        navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class:list={[{ 'bg-primary text-primary-content': isActive(item.href) }]}
            >
              {item.label}
            </a>
          </li>
        ))
      }
    </ul>
    <ThemeSelector client:load />
  </div>
</header>
